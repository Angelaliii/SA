# language: zh-TW

@US-CMPM-MSG-001 @message-notification @P2
功能: 訊息與通知
  身為平台使用者
  我想要擁有即時通訊功能和系統通知機制
  以便與合作夥伴保持有效溝通，並及時獲取重要事件和狀態變更的提醒

  背景:
    假設我已成功登入社團企業媒合平台
    而且我的帳號有正常的通知接收權限

  @direct-message
  場景大綱: 發送私人訊息
    當我訪問用戶"<收件人>"的個人檔案頁面
    而且我點擊"發送訊息"按鈕
    那麼系統應該開啟與該用戶的對話視窗
    
    當我輸入訊息內容"<訊息內容>"
    而且我點擊發送按鈕
    那麼系統應該<結果>

    例子:
      | 收件人               | 訊息內容                                   | 結果                                               |
      | 創新科技有限公司     | 您好，我想了解貴公司的校園合作機會         | 成功發送訊息並顯示已送達標記                       |
      | 設計與創意社         | 我們想邀請貴社團參與下個月的設計工作坊     | 成功發送訊息並顯示已送達標記                       |
      | 台大資管系學會       |                                           | 顯示"訊息不能為空"的錯誤提示                        |
      | 創新科技有限公司     | 這是一個包含超過500個字元的非常長的訊息... | 顯示"訊息長度已超過限制"的錯誤提示                 |

  @file-attachment
  場景: 發送檔案與圖片
    假設我已開啟與"創新科技有限公司"的對話視窗
    
    當我點擊"附加檔案"按鈕
    那麼系統應該顯示檔案選擇對話框
    
    當我選擇一個5MB的PDF檔案"proposal.pdf"
    而且我點擊"發送"按鈕
    那麼系統應該上傳該檔案並在對話中顯示檔案預覽
    而且對方應該收到含有檔案的訊息
    
    當我選擇一個12MB的視頻檔案"presentation.mp4"
    而且我點擊"發送"按鈕
    那麼系統應該顯示"檔案大小不得超過10MB"的錯誤提示
    
    當我點擊"添加圖片"按鈕
    而且我選擇一張圖片"design_sample.jpg"
    而且我點擊"發送"按鈕
    那麼系統應該立即在對話中顯示圖片預覽
    而且對方應該收到含有圖片的訊息

  @message-history
  場景: 查看訊息歷史記錄
    當我點擊導航菜單中的"訊息"選項
    那麼系統應該顯示我的所有對話列表
    而且列表應該按最近活動時間排序
    
    當我選擇與"創新科技有限公司"的對話
    那麼系統應該顯示與該用戶的完整對話歷史
    而且歷史記錄應該按時間順序顯示
    
    當對話記錄較長時
    那麼系統應該實施分頁或無限滾動加載
    而且較新的訊息應該顯示在底部
    
    當我在對話中搜尋關鍵詞"合作"
    那麼系統應該高亮顯示包含該關鍵詞的所有訊息
    
    當我刪除某條訊息
    那麼系統應該在確認後移除該訊息
    而且對方應該看到"此訊息已被刪除"提示

  @group-discussion
  場景: 創建群組討論
    當我點擊"新建群組"按鈕
    那麼系統應該顯示創建群組表單
    
    當我填寫群組名稱"校園設計大賽協調群"
    而且我添加成員"創新科技有限公司"和"設計與創意社"
    而且我點擊"創建群組"按鈕
    那麼系統應該顯示"群組已創建，可邀請成員加入"確認訊息
    而且系統應該創建新的群組對話
    而且所有被邀請的成員應該收到通知"您已被邀請加入『校園設計大賽協調群』"
    
    當我在群組中發送訊息"歡迎大家加入設計大賽協調群"
    那麼所有群組成員應該收到該訊息
    
    當我點擊"管理群組"按鈕
    那麼系統應該顯示群組管理選項
    當我添加新成員"數位行銷社"
    那麼該成員應該收到加入群組的邀請
    
    當我從群組中移除成員"設計與創意社"
    那麼系統應該顯示確認對話框
    當我確認移除
    那麼該成員應該被從群組中移除
    而且系統應該通知被移除的成員

  @notification-center
  場景: 系統通知管理
    當我點擊頁面頂部的通知圖標
    那麼系統應該顯示通知中心下拉面板
    而且我應該看到所有未讀和最近的通知
    
    當我有未讀通知時
    那麼通知圖標應該顯示未讀數量標記
    
    當我收到新通知"您的合作申請已被接受"
    那麼系統應該顯示推送提醒
    而且該通知應該出現在通知中心最上方
    
    當我點擊某條通知
    那麼系統應該導航到相關頁面
    而且該通知應該被標記為已讀
    
    當我點擊"全部標記為已讀"按鈕
    那麼系統應該將所有未讀通知標記為已讀
    而且未讀數量標記應該消失
    
    當我點擊"查看全部通知"
    那麼系統應該導航到完整的通知歷史頁面
    而且我應該能夠看到分類選項卡(全部/系統/合作/評價等)

  @notification-settings
  場景: 通知偏好設定
    當我進入"通知設定"頁面
    那麼我應該看到不同類型的通知選項
    
    當我關閉"評價提醒"通知
    那麼系統應該顯示"您已關閉『評價提醒』通知，可能會錯過重要訊息"提示
    當我確認設置
    那麼系統應該保存我的偏好
    而且顯示"通知偏好已更新"確認訊息
    
    當我將"合作申請"通知方式設為"站內+電子郵件"
    那麼系統應該在有新合作申請時同時發送站內通知和電子郵件
    
    當我設定免打擾時間為"晚上10點至早上7點"
    那麼系統在此時段不應發送推送通知
    而且通知應在免打擾時段結束後發送
    
    當我點擊"測試通知"按鈕
    那麼系統應該發送一條測試通知
    以便我確認通知設置是否正常工作

  @reminders
  場景: 活動提醒功能
    當我瀏覽"合作詳情"頁面並看到重要的截止日期
    而且我點擊該日期旁的"設置提醒"按鈕
    那麼系統應該顯示提醒設置選項
    
    當我選擇在截止日期前3天提醒
    而且我確認設置
    那麼系統應該顯示"提醒已設置，將在『時間』提醒您"確認訊息
    
    當我進入"我的提醒"頁面
    那麼我應該看到所有已設置的提醒列表
    
    當設置的提醒時間到達
    那麼系統應該發送提醒"您有『事項名稱』需要處理"
    而且提醒應該提供快速操作選項：已完成、稍後提醒、忽略
    
    當我點擊"稍後提醒"
    那麼系統應該顯示時間選擇器
    當我選擇"1小時後再提醒"
    那麼系統應該在1小時後再次發送該提醒
    
    當我設置週期性提醒"每週進度更新"
    那麼系統應該在每週指定時間發送提醒
    直到我取消該週期性提醒
